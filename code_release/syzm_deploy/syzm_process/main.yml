---
- name: restart tomcat {{ project_name }}
  shell: "nohup ./syzm_{{ project_name }}.py -d restart"
  args:
    chdir: "{{ script_directory }}"


- name: tomcat status {{ project_name }}
  shell: "nohup ./{{ project_name }}.py -d status &"
  args:
    chdir: "{{ script_directory }}"
  register: status_code
  until: status_code.stdout.find("200") != -1
  retries: 18
  delay: 10
  changed_when: false
- debug: msg="{{ project_name }} access code {{ status_code.stdout }} is sucessful!!! "
  when: status_code.stdout == "200"
